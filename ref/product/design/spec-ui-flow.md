# Minecraft RPG 計算機
## UI / UX 画面仕様書(UI Flow Spec)v1.0

本ドキュメントは、Minecraft RPG 計算機の
**画面構成・画面遷移・UI 要素・ユーザ操作フロー** を定義する。

---

# 1. 全体コンセプト

ユーザの主な目的は 2 つ:

1. 任意の装備構成で **火力を検証したい**(火力検証モード)
2. 条件を指定して **最適装備構成を探索したい**(最適装備探索モード)

このための UI を以下の画面に分割する:

- トップ画面
- 火力検証モード
- 最適装備探索モード

---

# 2. 画面構成概要

## 2.1 画面一覧

1. **TopPage**(トップ)
2. **ManualSimPage**(火力検証・手動モード)
3. **OptimizePage**(最適装備探索モード)

---

# 3. トップ画面(TopPage)

### 要素

- タイトル:
  `Minecraft RPG ダメージ計算機`
- ボタン:
  - 「火力検証(手動モード)」ボタン
  - 「最適装備探索(自動モード)」ボタン

### 挙動

- それぞれのボタン押下で対応するページへ遷移する。

---

# 4. 火力検証モード(ManualSimPage)

## 4.1 タブ構造

画面上部にタブを配置:

1. 職業
2. SP割り振り
3. 装備
4. 食事・指輪
5. 最終ステータス
6. スキル / 通常攻撃
7. 結果

---

## 4.2 職業タブ

### 入力項目

- 職業選択(ドロップダウン)
- 職業レベル(数値入力/スライダー)
- 使用可能武器種の表示(チェックボックス or ラベル)

### 機能

- 職業選択に応じて:
  - 使用可能武器種一覧を更新
  - 使用可能防具タイプ(布/革/金属)を制約

---

## 4.3 SP割り振りタブ

### 入力

- 総SP(表示のみ : 2 × 職業レベル)
- A ライン SP 割当(スライダー or 数値入力)
- B ライン SP 割当
- C ライン SP 割当

### 表示

- 各ラインの到達解放段階(A-1, A-2, ...)
- 解放済みスキル一覧
- 未解放スキルはグレーアウト表示

### 制約

- A+B+C <= 総SP
- 不足がある場合はエラー表示

---

## 4.4 装備タブ

### スロット一覧

- 武器(必須)
- 頭防具
- 胴防具
- 足防具
- ネックレス
- ブレスレット
- 紋章
  - ルーンストーン枠:Normal / Buster / Great / Replica 各 1 つまで

### UI 要素

- 各スロットにプルダウン or 検索フィールド
- 選択した装備はカード表示(名前 / Lv / 主なステータス)

### 制約

- 防具タイプ:職業ごとの許可されるタイプのみ選択可
- ルーン:グレードごとに 1 個まで
- 武器種:職業で使用不可のものは非表示

---

## 4.5 食事・指輪タブ

### 食事(料理)

- 食事 ON/OFF トグル
- 食事プルダウン(選択肢:食べ物 CSV)

### 指輪(特殊バフ)

- 指輪バフ ON/OFF トグル
- バフ内容(例:選択ステータスに対して Y% 上昇)を設定
- 最適装備探索モードでは「指輪を考慮するか?」フラグのみ利用

---

## 4.6 最終ステータスタブ

### 表示内容

- 全ステータス `{UserHP}`, `{UserPower}`, `{UserMagic}`, `{UserSpeed}`, `{UserCritRate}`, `{UserCritDamage}`, `{UserDefense}` ...
- 各ステータスの内訳(ホバー or 詳細を開くと表示):
  - 職業基礎
  - レベル成長
  - SP 補正
  - 武器
  - 防具
  - アクセ
  - 紋章
  - ルーン
  - 食事
  - 指輪
  - 職業％補正

UI 的には:

```text
力: 320 (+120 職業, +80 武器, +60 防具, +40 その他)
```

のような形式。

## 4.7 スキル / 通常攻撃タブ

### UI

武器種ごとに使用可能なスキル一覧(チェックボックス or ラジオボタン)

「通常攻撃」も必ず 1 つの選択肢として含める

使用条件を満たさないものは選択不可:

SP 解放されていない

武器種が対応していない

### 表示

スキル説明

使用武器種

CT

消費 MP

Hit数

## 4.8 結果タブ

### 出力内容

1 発当たりのダメージ

追撃を含む総ダメージ

Multi-Hit の場合:1Hit当たりダメージ + 総ダメージ

選択中スキル・通常攻撃の種別

参照された基礎ダメージ式

オプションで「詳細表示」を開くと:

基礎ダメージ各要素(武器攻撃力 × 補正、ステータス寄与、会心寄与など)

使用された丸め方式

# 5. 最適装備探索モード(OptimizePage)

## 5.1 構成

条件入力パネル

実行ボタン

結果一覧

## 5.2 条件入力パネル

### 項目

職業選択

職業レベル

使用するスキル or 通常攻撃(スキルパネルと同様)

武器種の制限(複数選択可)

防具タイプの制限(布 / 革 / 金属)

食事を考慮するか(ON/OFF)

指輪を考慮するか(ON/OFF)

SP ライン条件:

A ライン:min〜max

B ライン:min〜max

C ライン:min〜max

## 5.3 実行・プログレス

最適化ボタン押下で探索開始

推定総パターン数 or 組合せ数を表示(可能なら)

プログレスバーを表示

「キャンセル」ボタンを配置

内部では:

装備候補の組合せを列挙(または枝刈り付き探索)

各構成について spec-equipment-calc.md のルールで {UserXXX}, {WeaponXXX} を計算

spec-skill-damage.md のルールでダメージを評価

最大ダメージ構成を求める

## 5.4 結果表示

### 上部:ベスト構成

最大ダメージ(数値)

採用装備一覧(武器、防具、アクセ、紋章、ルーン)

職業レベル・SP 配分

食事・指輪 ON/OFF 状態

選択スキル or 通常攻撃

### 下部:2〜N 位候補

上位いくつかの構成をリスト表示(例:Top5)

各構成ごとに:

ダメージ値

装備構成概要

「詳細を見る」リンク

### 操作

「火力検証モードで開く」ボタン
 選択した構成を ManualSimPage に引き継ぎ、細かい検証ができる。

# 6. ナビゲーションと永続化

## 6.1 ナビゲーション

ヘッダーに常時表示:

【ロゴ/タイトル】

【火力検証】リンク

【最適装備探索】リンク

## 6.2 永続化(Local Storage)

以下の情報をブラウザに保存する:

最後に選択した職業

最後に選択した装備構成

最後に選択したスキル

SP 配分

食事 / 指輪 ON/OFF 状態

# 7. バリデーションとエラー表示

装備が不足している(武器未選択など)状態で「計算」した場合:
 赤字のバナーで警告表示

SP が総量を超えている場合:
 エラー表示 + 実行ボタン無効

職業がその武器を使用不可な場合:
 プルダウンに出さない / 選択不可

# 8. 拡張性

装備スロットが増えた場合:

装備タブにスロットを追加

最終ステータス計算は同一パイプラインに流す

敵ステータス(防御・属性耐性)を扱う場合:

別タブ「敵設定」を追加し、DPS 計算と合わせて管理する

将来の DPS 表示:

スキル CT や追撃発生頻度を元に、結果タブと最適化結果に「期待 DPS」を追加する余地を残す
